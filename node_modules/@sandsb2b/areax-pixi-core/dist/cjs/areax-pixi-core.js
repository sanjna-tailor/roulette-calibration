"use strict";var e=require("gsap"),t=require("gsap/PixiPlugin"),i=require("pixi.js"),s=require("eventemitter3"),r=require("pixi-spine"),n=require("howler"),o=require("@pixi/particle-emitter"),a=require("pixi-projection");function p(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var h=p(i),l=p(a);const d=(e,t)=>{const i=void 0===t?1e8:Math.pow(10,t);return Math.round(e*i)/i},c=(e,t,i={})=>{if(e in i)return i[e];if(0===e)return[];if(e<0)return null;for(const s of t){const r=d(e-s),n=c(r,t,i);if(null!==n)return i[e]=[...n,s],i[e]}return null},u=(e,t={})=>{const i=Object.assign(Object.assign({},e),t);return Object.entries(e).forEach((s=>{const[r,n]=s;"object"!=typeof n||n instanceof Array||(i[r]=u(e[r],t[r]))})),i};let m;const x=()=>{if(m)return m;const{href:e,pathname:t}=location,i=g(),s=e.replace(i+t,"").slice(1).split("&"),r={};return s.forEach((e=>{const t=e.indexOf("="),i=t>-1?decodeURIComponent(e.slice(t+1)):"";i&&(r[e.slice(0,t)]=i)})),m=r,r},g=()=>{if(null!=location.origin)return location.origin;const{protocol:e,hostname:t,port:i}=location;return`${e}//${t}${i?`:${i}`:""}`},v=e=>{const t=e.match(/([^/]+)\.[^.]+$/);return t?t[1]:""},S={WINDOW_DEBUG:!1,LOGGER:!1,COMMANDS:!0},y="__windowId__";function f(e,t,i){const s=`${i}_${t}`;e[y]=s,window[s]=e}function w(e){const t=e[y];t&&window[t]&&(delete e[y],window[t]=null,delete window[t])}const A=new Map,_=new Map,b=e=>{if(A.has(e))return _.has(e)||_.set(e,new e),_.get(e);throw new Error(`${e.name} is not added to injections!`)},M=e=>t=>{if(e){if(!A.has(e))throw new Error(`${e.name} is not added to injections for replace!`);A.set(e,t)}else{if(A.has(t))throw new Error(`${t.name} already added to injections!`);A.set(t,t)}},T=new Map,E=new Map;function O(e,t){if(E.has(e))throw new Error(`Layout template '${e}' is already registered`);E.set(e,t)}function C(e){if(!T.has(e))throw new Error(`Layout '${e}' is not registered`);return T.get(e)}function P(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function D(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{p(s.next(e))}catch(e){n(e)}}function a(e){try{p(s.throw(e))}catch(e){n(e)}}function p(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}p((s=s.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError,exports.EventEmitter=class{constructor(){this.ignoreList=["render"],this.emitter=new s.EventEmitter,this.promiseMap=new Map}emit(e,t){return S.LOGGER&&this.logEvent(e,t),this.emitter.emit(e,t)}on(e,t,i){return this.emitter.on(e,t,i),this}once(e,t,i){return this.emitter.once(e,t,i),this}off(e,t,i,s){return this.emitter.off(e,t,i,s),this}promiseEmit(e,t){return S.LOGGER&&this.logEvent(e,t,!0),this.promiseMap.has(e)?Promise.all(this.promiseMap.get(e).map((({handler:e,context:i})=>e.call(i,t)))):Promise.reject(new Error(`No active subscription for this promise emit [${String(e)}]`))}promiseOn(e,t,i){this.promiseMap.has(e)?this.promiseMap.get(e).push({handler:t,context:i}):this.promiseMap.set(e,[{handler:t,context:i}])}promiseOff(e,t,i){const s=(void 0===this.promiseMap.get(e)||null===this.promiseMap.get(e)?[]:this.promiseMap.get(e)).filter((e=>!(e.handler===t&&e.context===i)));this.promiseMap.set(e,s)}logEvent(e,t,i=!1){if(this.ignoreList.indexOf(e)>-1)return;const s=[...i?["%cPROMISE","background: #42f5dd; color: #000000"]:[],{event:e,payload:t}];console.log(...s)}},exports.EventEmitter=P([M()],exports.EventEmitter);class R{constructor(){this.eventEmitter=b(exports.EventEmitter),this.listenersMap=new Map,this.promiseMap=new Map}promiseEmit(e,t){return this.eventEmitter.promiseEmit(e,t)}promiseOn(e,t){this.eventEmitter.promiseOn(e,t,this),this.promiseMap.set(e,t)}promiseOff(e,t){this.eventEmitter.promiseOff(e,t,this),this.promiseMap.delete(e)}emit(e,t){this.eventEmitter.emit(e,t)}on(e,t){this.eventEmitter.on(e,t,this),this.listenersMap.set(t,e)}off(e,t){t?(this.eventEmitter.off(e,t,this),this.listenersMap.delete(t)):this.listenersMap.forEach(((t,i)=>{t===e&&this.off(e,i)}))}destroy(){this.removeAllListeners()}removeAllListeners(){this.listenersMap.forEach(((e,t)=>{this.off(e,t)})),this.promiseMap.forEach(((e,t)=>{this.promiseOff(t,e)}))}}class X extends R{constructor(e){super(),this.viewListenersMap=new Map,this.view=e,this.initialize()}onView(e,t){this.view.on(e,t,this),this.viewListenersMap.set(t,e)}offView(e,t){t?(this.view.off(e,t,this),this.viewListenersMap.delete(t)):this.viewListenersMap.forEach(((t,i)=>{t===e&&this.offView(e,i)}))}removeAllListeners(){super.removeAllListeners(),this.viewListenersMap.forEach(((e,t)=>{this.offView(e,t)}))}}const L=new Map,B=new Map;const j=new Map,F=[],k=e=>{var t,i,s;if(!e)throw new Error("Layout does not exist!");if(e.template&&(e=u((e=>{if(!E.has(e))throw new Error(`layout template for '${e}' is not registered`);return E.get(e)})(e.template),e)),!(j.has(e.selector)&&(i=e.selector,F.indexOf(j.get(i))>-1)))throw Error(`Component with selector ${e.selector} is not registered!`);s=e.selector,T.has(s)&&(e=u(C(e.selector),e));const r=j.get(e.selector),n=new r(e);n.applyLayout(e);const o=null!==(t=n.name)&&void 0!==t?t:n.constructor.name;var a;return a=r,B.has(a)&&(!function(e,t){var i;const s=B.get(e),r=null!==(i=t.name)&&void 0!==i?i:t.constructor.name;if(s){const e=new s(t);L.set(t,e),S.WINDOW_DEBUG&&f(e,r,"m")}}(n.constructor,n),n.once("destroyed",(()=>{!function(e){const t=L.get(e);t&&(S.WINDOW_DEBUG&&w(t),t.destroy(),L.delete(e))}(n),S.WINDOW_DEBUG&&o&&w(n)}))),S.WINDOW_DEBUG&&o&&f(n,o,"c"),n},U=e=>k(C(e)),I=({selector:e,layout:t,mediator:i})=>s=>{if(j.has(e))throw new Error(`Component with selector "${e}" already registered`);j.set(e,s),t&&function(e,t){if(T.has(e))throw new Error(`Layout '${e}' is already registered`);T.set(e,t)}(e,t),i&&((e,t)=>{B.set(t,e)})(i,s)},z=new Map,N=new Map,G=[],$=(e,t)=>{var i;if(-1===G.indexOf(e))throw new Error(`Game action ${e.name} is not registered`);const s=new(null!==(i=z.get(e))&&void 0!==i?i:e);return s.run(t),s.promise};class q{constructor(){this.actions=[]}get isEmpty(){return 0===this.actions.length}add(e){return-1===this.actions.indexOf(e)&&(this.actions.push(e),!0)}remove(e){const t=this.actions.indexOf(e);t>-1&&this.actions.splice(t,1)}run(e){this.actions.forEach((t=>{$(t,e)}))}}class W{constructor(e,t){this.component=e,this.config=t,this.component=e,this.config=t,this.create()}}const H={_queue:new Map,add(e){this._queue.has(e.type)?console.error(`View extension with type ${e.type} already exist!`):this._queue.set(e.type,e)},remove(e){this._queue.delete(e.type)},get(e){return this._queue.has(e)||console.error(`View extension with type ${e} is not exist!`),this._queue.get(e)}};var V=Object.freeze({__proto__:null,deepObjectMerge:u,getAllUrlParams:x,getFileNameFromUrl:v,getOrigin:g,getUrlParam:e=>(m=x(),m[e]),howSum:c,limitBetween:(e,t,i)=>Math.min(Math.max(i,e),t),randomInt:(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)),randomNumber:(e,t)=>Math.random()*(t-e)+e,skippablePromiseChain:function(e,t){const i=b(exports.EventEmitter),s=[...e];let r=Promise.resolve();for(let n=0,o=e.length;n<o;n++){const o=e[n];r=r.then((()=>new Promise(((e,r)=>{s.splice(0,1);const n=()=>{i.off(t,r),r(s)};i.on(t,n),o().then((()=>{i.off(t,n),e({})}))}))))}return r.then((()=>[])).catch((e=>e))},toFixedNumber:d});function K(e,t,i){return"scale"===t?(Y("scale",e,i),!0):"pivot"===t?(Y("pivot",e,i),!0):"skew"===t?(Y("skew",e,i),!0):"position"===t?(Y("position",e,i),!0):"hitArea"===t?(Q(e,i),!0):"name"===t?(e.name=i,!0):"extensions"===t?(e.extensions=i.map((t=>new(H.get(t.type))(e,t.config))),!0):(["template","selector"].includes(t)||(e[t]=i),!0)}const Y=(e,t,i)=>{"object"==typeof i?("x"in i&&(t[e].x=i.x),"y"in i&&(t[e].y=i.y)):t[e].set(i)},Q=(e,t)=>{const{x:s,y:r,width:n,height:o,shape:a,radius:p}=t;"rectangle"===a&&(e.hitArea=new i.Rectangle(s,r,n,o)),"circle"===a&&(e.hitArea=new i.Circle(s,r,p))};function J(e,t){const i=e.getAppliers();Object.keys(t).forEach((s=>{for(let r=0;r<i.length&&!i[r](e,s,t[s]);r++);}))}var Z,ee=Object.freeze({__proto__:null,applyBaseLayout:K,applyHitArea:Q,applyLayout:J,applyPointLikeParam:Y});exports.AXContainer=Z=class extends i.Container{constructor(){super(),this.on("added",(()=>this.onAdded()))}emit(e,...t){return super.emit(e,...t)}on(e,t,i){return super.on(e,t,i)}applyLayout(e){J(this,e)}getAppliers(){return[...Z.appliers,te,K]}onDisplayDataUpdate(e){this.extensions&&this.extensions.forEach((t=>t.update(e))),this.children.forEach((t=>{t.onDisplayDataUpdate&&t.onDisplayDataUpdate(e)}))}onAdded(){}},exports.AXContainer.appliers=[],exports.AXContainer=Z=P([I({selector:"container"})],exports.AXContainer);const te=(e,t,i)=>"children"===t&&(i.forEach((t=>{const i=k(t);i&&(e.addChild(i),e[t.name]=i)})),!0);exports.RootContainerComponent=class extends exports.AXContainer{constructor(){super(...arguments),this.createdScene=new Map,this.renderManager=b(exports.RenderManager),this.displayDataManager=b(exports.DisplayDataManager)}createScene(e){const t=U(e);return this.createdScene.set(e,t),this.renderManager.prepareView(t)}runScene(e){if(!this.createdScene.has(e))throw new Error(`Game scene with id ${e} is no created`);return this.gameContainer.children.forEach((e=>{e.destroy()})),this.gameContainer.addChild(this.createdScene.get(e)),this.onDisplayDataUpdate(Object.assign(Object.assign({},this.displayDataManager.params),{stateChanged:!0})),Promise.resolve()}onDisplayDataUpdate(e){const{viewSize:t,gameScale:i}=e,s=this.scale.x,r=this.scale.y;this.pivot.set(t.width/s/-2,t.height/r/-2),this.gameContainer.scale.set(i),super.onDisplayDataUpdate(e)}},exports.RootContainerComponent=P([I({selector:"rootContainer",layout:{selector:"rootContainer",children:[{name:"gameContainer",selector:"container"}]},mediator:class extends X{initialize(){this.promiseOn("createGameScene",(e=>this.onCreateGameScene(e))),this.promiseOn("runGameScene",(e=>this.onRunGameScene(e))),this.on("displayDataUpdate",(e=>this.onDisplayDataUpdate(e)))}onCreateGameScene(e){return this.view.createScene(e)}onRunGameScene(e){return this.view.runScene(e)}onDisplayDataUpdate(e){this.view.onDisplayDataUpdate(e)}}})],exports.RootContainerComponent);class ie extends exports.AXContainer{constructor(){super(...arguments),this._textParams={},this._maxSize={width:0,height:0},this.originalText="",this.translationManager=b(exports.TranslationManager)}get resolution(){return this._textField.resolution}set resolution(e){this._textField.resolution=e}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Object.assign(Object.assign({},this._maxSize),e),this.updateText()}get text(){return this._textField.text}set text(e){this.originalText=e,this.updateText()}get textField(){return this._textField}get textKey(){return this._textKey}set textKey(e){this._textKey=e,this.originalText=this.translationManager.getTranslation(e,this._textParams),this.updateText()}get textParams(){return this._textParams}set textParams(e){this._textParams=Object.assign(Object.assign({},this._textParams),e),this.textKey&&(this.originalText=this.translationManager.getTranslation(this.textKey,this._textParams)),this.updateText()}updateText(){this.textField.text=this.originalText}resizeText(){if(this.maxSize.width>0||this.maxSize.height>0){const e=this._textField.getLocalBounds(),t=this.maxSize.width/(e.width+2*this.getPadding())||1,i=this.maxSize.height/(e.height+2*this.getPadding())||1;this._textField.scale.set(Math.min(1,t,i))}}}var se;exports.AXBitmapText=se=class extends ie{constructor(e){var t;super(),this.createTextField(null===(t=e.style)||void 0===t?void 0:t.fontName)}get style(){return{fontName:this._textField.fontName,fontSize:this._textField.fontSize,tint:this._textField.tint,align:this._textField.align,letterSpacing:this._textField.letterSpacing,maxWidth:this._textField.maxWidth}}set style(e){Object.keys(e).forEach((t=>{this._textField[t]=e[t]})),this.updateText()}get blendMode(){return this.textField.children[0].blendMode}set blendMode(e){this.textField.children[0].blendMode=e}getAppliers(){return[...se.appliers,re,...super.getAppliers()]}updateText(){super.updateText(),this.resizeText()}getPadding(){return 0}createTextField(e){if(!e)throw Error("Style 'fontName' in layout is mandatory for bitmap text!");this._textField=new i.BitmapText("",{fontName:e}),this.anchor=this._textField.anchor,this.anchor.set(.5),this.addChild(this._textField)}},exports.AXBitmapText.appliers=[],exports.AXBitmapText=se=P([I({selector:"bitmapText"})],exports.AXBitmapText);const re=(e,t,i)=>"anchor"===t&&(Y("anchor",e,i),!0);var ne;exports.AXHTMLText=ne=class extends ie{constructor(){super(),this._htmlStyle={},this.createTextField()}get htmlStyle(){return this.updateText(),this._htmlStyle}set htmlStyle(e){this._htmlStyle=u(this._htmlStyle,e),this.updateText()}get style(){return this._textField.style}set style(e){Object.keys(e).forEach((t=>{this._textField.style[t]=e[t]})),this.updateText()}get blendMode(){return this.textField.blendMode}set blendMode(e){this.textField.blendMode=e}getAppliers(){return[...ne.appliers,oe,...super.getAppliers()]}updateText(){super.updateText(),this.updateStylesheet(),this.resizeText()}getPadding(){return this.style.padding}updateStylesheet(){let e="";Object.keys(this._htmlStyle).forEach((t=>{e+=`${t}{`,Object.keys(this._htmlStyle[t]).forEach((i=>{e+=`${i}:${this._htmlStyle[t][i]};`})),e+="}"})),this.style.stylesheet=e}createTextField(){this._textField=new i.HTMLText(""),this.anchor=this._textField.anchor,this.anchor.set(.5),this.addChild(this._textField)}},exports.AXHTMLText.appliers=[],exports.AXHTMLText.defaultStyle={align:"center",breakWords:!0},exports.AXHTMLText=ne=P([I({selector:"HTMLText"})],exports.AXHTMLText);const oe=(e,t,i)=>"anchor"===t?(Y("anchor",e,i),!0):"style"===t&&(e.style=i,!0);var ae;exports.AXText=ae=class extends ie{constructor(){super(),this.createTextField()}get style(){return this._textField.style}set style(e){Object.keys(e).forEach((t=>{this._textField.style[t]=e[t]})),this.updateText()}get textTransform(){return this._textTransform}set textTransform(e){this._textTransform=e,this.updateText()}get blendMode(){return this.textField.blendMode}set blendMode(e){this.textField.blendMode=e}getAppliers(){return[...ae.appliers,pe,...super.getAppliers()]}updateText(){super.updateText(),this.transformText(),this.resizeText()}createTextField(){this._textField=new i.Text(""),this.style=ae.defaultStyle,this.anchor=this._textField.anchor,this.anchor.set(.5),this.addChild(this._textField)}getPadding(){return this.style.padding}transformText(){switch(this._textTransform){case"lowercase":this._textField.text=this.originalText.toLowerCase();break;case"uppercase":this._textField.text=this.originalText.toUpperCase()}}},exports.AXText.appliers=[],exports.AXText.defaultStyle={align:"center",breakWords:!0},exports.AXText=ae=P([I({selector:"text"})],exports.AXText);const pe=(e,t,i)=>"style"===t?(e.style=i,"textTransform"in i&&(e.textTransform=i.textTransform),!0):"anchor"===t&&(Y("anchor",e,i),!0);var he;exports.AXAnimatedSprite=he=class extends i.AnimatedSprite{constructor(){super([i.Texture.EMPTY]),this.sequences={},this.loopsCount=0,this.onComplete=this.onCompleteInternal.bind(this)}applyLayout(e){J(this,e)}destroy(e){this.onComplete=null,super.destroy(e)}forceComplete(){this.stop(),this.animationCompleteResolve&&this.animationCompleteResolve()}getAppliers(){return[...he.appliers,le,K]}onCompleteInternal(){this.animationCompleteResolve&&(this.loopsCount--,this.loopsCount>0?this.gotoAndPlay(0):this.animationCompleteResolve())}onDisplayDataUpdate(e){this.extensions&&this.extensions.forEach((t=>t.update(e)))}playAnim(e,t=this.loop){if(!this.sequences[e])throw new Error(`SpriteAnimation: Sequence named ${e} does not exist!`);this.loop=t,this.textures=this.sequences[e],this.gotoAndPlay(0)}playMovie(e,t=0){return e&&(this.loop=!1,this.textures=this.sequences[e],this.gotoAndStop(0)),this.loopsCount=t,new Promise((e=>{this.animationCompleteResolve=()=>{e({}),this.animationCompleteResolve=null},this.play()}))}},exports.AXAnimatedSprite.appliers=[],exports.AXAnimatedSprite=he=P([I({selector:"animatedSprite"})],exports.AXAnimatedSprite);const le=(e,t,i)=>{if("anchor"===t)return Y("anchor",e,i),!0;if("animation"===t)return e.playAnim(i),!0;if("sequences"===t){const t=b(exports.ResourceManager);return Object.keys(i).forEach((s=>{const r=i[s];e.sequences[s]=r.map((e=>t.getTexture(e)))})),!0}return!1};var de;exports.AXSprite=de=class extends i.Sprite{constructor(){super(),this.resourceManager=b(exports.ResourceManager)}applyLayout(e){J(this,e)}changeTexture(e){this.texture=this.resourceManager.getTexture(e)}getAppliers(){return[...de.appliers,ce,K]}onDisplayDataUpdate(e){this.extensions&&this.extensions.forEach((t=>t.update(e)))}},exports.AXSprite.appliers=[],exports.AXSprite=de=P([I({selector:"sprite"})],exports.AXSprite);const ce=(e,t,i)=>"img"===t?(e.changeTexture(i),!0):"anchor"===t&&(Y("anchor",e,i),!0);var ue;exports.AXButton=ue=class extends exports.AXContainer{constructor(){super(),this.soundManager=b(exports.SoundManager),this.renderManager=b(exports.RenderManager),this._isActive=!0,this._visible=!0,this.createButtonSprite(),this.addhandlers(),this.cursor="pointer",Object.defineProperty(this,"visible",{get(){return this._visible},set(e){this._visible=e,this._visible&&this.resetState()}}),this.isActive=this._isActive}get isActive(){return this.interactive}set isActive(e){this.eventMode=e?"static":"auto",this._isActive=e,this.updateState()}get label(){return this._label}set label(e){this.removeChild(this._label),this._label=e,this.addChild(e)}getAppliers(){return[...ue.appliers,me,...super.getAppliers()]}setStateTexture(e,t){this.stateTextures[e]=t,this.updateState()}setStateTextures(e){this.stateTextures=e,this.updateState()}virtualClick(){this.onClick(new i.FederatedMouseEvent(this.renderManager.eventSystem.rootBoundary))}resetState(){const e=this.renderManager.eventSystem.pointer.global;this.isDown=!1,this.isOver=this.getBounds().contains(e.x,e.y),this.updateState()}addhandlers(){this.on("pointerdown",(e=>this.onButtonDown(e))).on("pointerup",(e=>this.onButtonUp(e))).on("pointerover",(e=>this.onButtonOver(e))).on("pointerupoutside",(e=>this.onUpOutside(e))).on("pointerout",(e=>this.onButtonOut(e))).on("pointertap",(e=>this.onClick(e)))}createButtonSprite(){this.buttonSprite=new exports.AXSprite,this.buttonSprite.anchor.set(.5),this.addChild(this.buttonSprite)}emitEvent(e,t){this.isActive&&this.emit(e,t)}onButtonDown(e){this.isDown=!0,this.updateState(),this.emitEvent("buttonDown",e)}onButtonOut(e){this.isOver=!1,this.updateState(),this.emitEvent("buttonOut",e)}onButtonOver(e){this.isOver=!0,this.updateState(),this.emitEvent("buttonOver",e)}onButtonUp(e){this.isDown=!1,this.updateState(),this.emitEvent("buttonUp",e)}onClick(e){this.isActive&&(this.playSound(),this.emitEvent("buttonClick",e))}onUpOutside(e){this.isDown=!1,this.updateState(),this.emitEvent("buttonUpOutside",e)}playSound(){this.soundName&&this.soundManager.play(this.soundName)}updateState(){let e="normal";this.isActive?this.isDown?e="down":this.isOver&&(e="hover"):e="disabled",this.state=e,this.updateTexture(e)}updateTexture(e){var t;const i=null===(t=this.stateTextures)||void 0===t?void 0:t[e];i&&(this.buttonSprite.texture=i)}},exports.AXButton.appliers=[],exports.AXButton=ue=P([I({selector:"button"})],exports.AXButton);const me=(e,t,i)=>{if("img"===t){const t=b(exports.ResourceManager);return e.setStateTextures(((e,t)=>({normal:e.getTexture(t.normal),hover:e.getTexture(t.hover),down:e.getTexture(t.down),disabled:e.getTexture(t.disabled)}))(t,i)),!0}return"label"===t&&(e.label=k(i),!0)};var xe;exports.AXGraphics=xe=class extends i.Graphics{constructor(e){super(),this.drawLayout(e)}applyLayout(e){J(this,e)}getAppliers(){return[...xe.appliers,ge,K]}onDisplayDataUpdate(e){this.extensions&&this.extensions.forEach((t=>t.update(e)))}drawLayout(e){var t,i,s,r,n,o,a,p;this.beginFill(null!==(t=e.color)&&void 0!==t?t:0),"lineStyle"in e&&this.lineStyle(e.lineStyle),"rect"===e.shape&&(this.moveTo(0,0),this.lineTo(null!==(i=e.width)&&void 0!==i?i:1,0),this.lineTo(null!==(s=e.width)&&void 0!==s?s:1,null!==(r=e.height)&&void 0!==r?r:1),this.lineTo(0,null!==(n=e.height)&&void 0!==n?n:1),this.lineTo(0,0)),"ellipse"===e.shape&&this.drawEllipse(0,0,e.ellipseXRadius||1,e.ellipseYRadius||1),"roundRect"===e.shape&&this.drawRoundedRect(0,0,null!==(o=e.width)&&void 0!==o?o:1,null!==(a=e.height)&&void 0!==a?a:1,e.radius),"circle"===e.shape&&this.drawCircle(0,0,null!==(p=e.radius)&&void 0!==p?p:1),this.endFill()}},exports.AXGraphics.appliers=[],exports.AXGraphics=xe=P([I({selector:"graphics"})],exports.AXGraphics);const ge=(e,t)=>!!["lineStyle","shape","radius","color","ellipseXRadius","ellipseYRadius"].includes(t);var ve;exports.AXNineSlicePlane=ve=class extends i.NineSlicePlane{constructor(e){super(b(exports.ResourceManager).getTexture(e.img)),this.appliers=[]}applyLayout(e){J(this,e)}getAppliers(){return[...ve.appliers,Se,K]}onDisplayDataUpdate(e){this.extensions&&this.extensions.forEach((t=>t.update(e)))}},exports.AXNineSlicePlane.appliers=[],exports.AXNineSlicePlane=ve=P([I({selector:"nineSlicePlane"})],exports.AXNineSlicePlane);const Se=(e,t,i)=>"img"===t&&(e.texture=b(exports.ResourceManager).getTexture(i),!0);var ye;exports.AXParticlesEmitter=ye=class extends exports.AXContainer{constructor(e){super(),"v3"===e.config.type||"v3extended"===e.config.type?this.init(e.config.emitter,e.config.particleContainer):this.init(o.upgradeConfig(e.config.emitter,e.config.assets),e.config.particleContainer)}getAppliers(){return[...ye.appliers,fe,...super.getAppliers()]}start(){this.emitter.emit=!0}stop(){this.emitter.emit=!1}init(e,t={}){var s,r;this.particleContainer=new i.ParticleContainer(null!==(s=t.maxSize)&&void 0!==s?s:1e3,t.properties,t.batchSize,t.autoResize),this.particleContainer.blendMode=null!==(r=t.blendMode)&&void 0!==r?r:0,this.addChild(this.particleContainer),this.emitter=new o.Emitter(this.particleContainer,e),this.emitter.autoUpdate=!0}},exports.AXParticlesEmitter.appliers=[],exports.AXParticlesEmitter=ye=P([I({selector:"particlesEmitter"})],exports.AXParticlesEmitter);const fe=(e,t,i)=>"paused"===t?(i?e.stop():e.start(),!0):"config"===t;var we;exports.AXSpine=we=class extends r.Spine{constructor(e){super(b(exports.ResourceManager).getSpineData(e.spine)),this.loop=!1,this._animationsResolve={},this._globalTimeScale=1,this._localTimeScale=1,this._localTimeScale=this.state.timeScale,this.addHandlers()}get timeScale(){return this._localTimeScale}set timeScale(e){this._localTimeScale=e,this.state.timeScale=e*we.globalTimeScale}applyLayout(e){J(this,e)}destroy(e){this._animationsResolve={},super.destroy(e)}forceComplete(){this.stop(),Object.keys(this._animationsResolve).forEach((e=>{this._animationsResolve[e].resolve()})),this._animationsResolve={}}getAppliers(){return[...we.appliers,Ae,K]}onDisplayDataUpdate(e){this.extensions&&this.extensions.forEach((t=>t.update(e)))}play(e,t=0,i=this.loop){this.lastTime=(new Date).getTime(),this.state.setAnimation(t,e,i)}playMovie(e,t=0,i=0){return new Promise((s=>{this._animationsResolve[t]={loopsCount:i,name:e,resolve:s},this.play(e,t,!1)})).then((()=>{delete this._animationsResolve[t]}))}setSkinByName(e){this.skeleton.setSkinByName(e)}stop(){this.state.clearTracks(),this.skeleton.setToSetupPose()}update(e){this._globalTimeScale!==we.globalTimeScale&&(this._globalTimeScale=we.globalTimeScale,this.timeScale=this._localTimeScale),super.update(e)}addHandlers(){this.state.addListener({event:(e,t)=>{this.onEvent&&this.onEvent(t.data.name,e)},complete:e=>{this.onCompleteCheck(e)}})}onCompleteCheck({trackIndex:e}){const t=this._animationsResolve[e];t&&(t.loopsCount--,t.loopsCount>0?this.play(t.name,e,!1):t.resolve())}},exports.AXSpine.appliers=[],exports.AXSpine.globalTimeScale=1,exports.AXSpine=we=P([I({selector:"spine"})],exports.AXSpine);const Ae=(e,t,i)=>"skin"===t?(e.setSkinByName(i),!0):"animation"===t?(e.play(i),!0):"spine"===t;var _e;exports.AXSpineButton=_e=class extends exports.AXContainer{constructor(){super(),this.soundManager=b(exports.SoundManager),this.renderManager=b(exports.RenderManager),this.currentState="normal",this.playStateAnimBlocked=!1,this._lastAnimationPlayed="",this._isActive=!0,this.addhandlers()}get isActive(){return this._isActive}set isActive(e){const t=e?"static":"auto";this.eventMode!==t&&(!1===e&&(this.isOver=!1),this.eventMode=t,this._isActive=e,this.updateState())}getAppliers(){return[..._e.appliers,be,...super.getAppliers()]}virtualClick(){this.onClick(new i.FederatedMouseEvent(this.renderManager.eventSystem.rootBoundary))}createButtonSpine(e){this.buttonSpine=new exports.AXSpine({selector:"spine",spine:e}),this.addChild(this.buttonSpine)}get buttonSpine(){return this._buttonSpine}set buttonSpine(e){this.removeChild(this._buttonSpine),this._buttonSpine=e,this.addChild(e)}get stateAnimations(){return this._stateAnimations}set stateAnimations(e){this._stateAnimations=e}addhandlers(){this.on("pointerdown",(e=>this.onButtonDown(e))).on("pointerup",(e=>this.onButtonUp(e))).on("pointerover",(e=>this.onButtonOver(e))).on("pointerupoutside",(e=>this.onUpOutside(e))).on("pointerout",(e=>this.onButtonOut(e))).on("pointertap",(e=>this.onClick(e)))}emitEvent(e,t){this.isActive&&this.emit(e,t)}onButtonDown(e){this.isDown=!0,this.updateState(),this.emitEvent("buttonDown",e)}onButtonOut(e){this.isOver=!1,this.updateState(),this.emitEvent("buttonOut",e)}onButtonOver(e){this.isOver=!0,this.updateState(),this.emitEvent("buttonOver",e)}onButtonUp(e){this.isDown=!1,this.updateState(),this.emitEvent("buttonUp",e)}onClick(e){this.isActive&&(this.playSound(),this.emitEvent("buttonClick",e))}onUpOutside(e){this.isDown=!1,this.updateState(),this.emitEvent("buttonUpOutside",e)}playSound(){this.soundName&&this.soundManager.play(this.soundName)}updateState(){this.currentState="normal",this.isActive?this.isDown?this.currentState="down":this.isOver&&(this.currentState="hover"):this.currentState="disabled",this.playStateAnimBlocked||this.playStateAnimation(this.currentState)}playStateAnimation(e){"down"===e?(this.playStateAnimBlocked=!0,this.buttonSpine.playMovie(this._stateAnimations[e]).then((()=>this.playStateAnimation("down"===this.currentState?"normal":this.currentState))).then((()=>this.playStateAnimBlocked=!1))):(this.currentState=e,""!==this._lastAnimationPlayed&&this.buttonSpine.stateData.setMix(this._lastAnimationPlayed,this._stateAnimations[e],.2),this._lastAnimationPlayed=this._stateAnimations[e],this.buttonSpine.play(this._stateAnimations[e],0,!1))}},exports.AXSpineButton.appliers=[],exports.AXSpineButton=_e=P([I({selector:"spineButton"})],exports.AXSpineButton);const be=(e,t,i)=>{switch(t){case"animations":return e.stateAnimations=i,!0;case"spine":return e.buttonSpine=k(i),!0}return!1};var Me;exports.AXTilingSprite=Me=class extends i.TilingSprite{constructor(e){super(b(exports.ResourceManager).getTexture(e.img))}applyLayout(e){J(this,e)}getAppliers(){return[...Me.appliers,Te,K]}onDisplayDataUpdate(e){this.extensions&&this.extensions.forEach((t=>t.update(e)))}},exports.AXTilingSprite.appliers=[],exports.AXTilingSprite=Me=P([I({selector:"tilingSprite"})],exports.AXTilingSprite);const Te=(e,t,i)=>"anchor"===t?(Y("anchor",e,i),!0):"tileScale"===t?(Y("tileScale",e,i),!0):"tilePosition"===t?(Y("tilePosition",e,i),!0):"img"===t;class Ee extends W{create(){}update(e){var t,i;const s=this.component.parent;if(!s)return;const{viewSize:r}=e,n=this.component.getLocalBounds(),o=(null===(t=this.config)||void 0===t?void 0:t.width)||n.width,a=(null===(i=this.config)||void 0===i?void 0:i.height)||n.height,p=r.width/o/this.calcScale(s,"x"),h=r.height/a/this.calcScale(s,"y");this.component.scale.set(Math.max(p,h))}calcScale(e,t){return e.scale[t]*(e.parent?this.calcScale(e.parent,t):1)}}Ee.type="fullSize";class Oe extends W{create(){this.displayDataManager=b(exports.DisplayDataManager),this.defineContentBoxProperty(),this.defineSideProperty("left"),this.defineSideProperty("right"),this.defineSideProperty("top"),this.defineSideProperty("bottom")}update(e){if(!this.isNeedUpdate())return;const{viewSize:t,gameScale:i,designSize:s,orientation:r}=e,n=this.component.toGlobal({x:0,y:0}),o="portrait"===r?s.height:s.width,a="portrait"===r?s.width:s.height;let p=(t.width-o*i)/2,h=(t.height-a*i)/2;"global"===this.component.contentBox&&(p=0,h=0),Number.isFinite(this.component.left)&&(n.x=this.component.left*i+p),Number.isFinite(this.component.right)&&(n.x=t.width-(this.component.right*i+p)),Number.isFinite(this.component.top)&&(n.y=this.component.top*i+h),Number.isFinite(this.component.bottom)&&(n.y=t.height-(this.component.bottom*i+h));const l=this.component.parent.toLocal(n);this.component.position.set(l.x,l.y)}isNeedUpdate(){var e,t,i;const s=Number.isFinite(null!==(i=null!==(t=null!==(e=this.component.left)&&void 0!==e?e:this.component.right)&&void 0!==t?t:this.component.top)&&void 0!==i?i:this.component.bottom);return this.component.parent&&s}defineSideProperty(e){const t=()=>{this.update(this.displayDataManager.params)},i=this.component[e];Object.defineProperty(this.component,e,{get:function(){return this[`_${e}`]},set:function(i){this[`_${e}`]=i,t()},configurable:!0}),this.component[e]=i}defineContentBoxProperty(){const e=()=>{this.update(this.displayDataManager.params)},t=this.component.contentBox;this.component._contentBox="design",Object.defineProperty(this.component,"contentBox",{get:function(){return this._contentBox},set:function(t){this._contentBox=t,e()},configurable:!0}),this.component.contentBox=t}}Oe.type="stickToEdge";class Ce extends W{create(){}update(e){if(e.stateChanged){let t=this.config.portrait;"desktop"===e.orientationState?t=this.config.desktop:"landscape"===e.orientationState?t=this.config.landscape:"tabLandscape"===e.orientationState?t=this.config.tabLandscape:"tabPortrait"===e.orientationState&&(t=this.config.tabPortrait),J(this.component,null!=t?t:{})}}}Ce.type="orientationState",H.add(Ee),H.add(Oe),H.add(Ce),exports.RenderManager=class{constructor(){this.eventEmitter=b(exports.EventEmitter),this.setupRenderer()}get canvasElement(){return this._renderer.view}get renderer(){return this._renderer}get rootContainer(){return this._rootContainer}createRenderer(e){if(this._renderer)return void console.error("Renderer already exist!");const t=Object.assign({width:1,height:1,backgroundColor:0,autoDensity:!0,resolution:window.devicePixelRatio||1,backgroundAlpha:1,clearBeforeRender:!1,powerPreference:"high-performance",antialias:!1},e);i.settings.RESOLUTION=i.settings.FILTER_RESOLUTION=t.resolution,this._renderer=new i.Renderer(t),this.eventSystem=this._renderer.events,this._rootContainer=U("rootContainer"),this._rootContainer.emit("added",void 0),gsap.ticker.add((()=>this.render()))}fps(e){gsap.ticker.fps(e)}freeze(e){this.gameSpeed(e?0:1),r.settings.GLOBAL_AUTO_UPDATE=!e,this._rootContainer.eventMode="none"}gameSpeed(e){gsap.globalTimeline.timeScale(e),exports.AXSpine.globalTimeScale=e,i.Ticker.shared.speed=e}prepareView(e){return this._renderer.prepare.upload(e)}resize(e,t){this._renderer.resize(e,t)}render(){this._renderer.render(this._rootContainer),this.eventEmitter.emit("render")}setupRenderer(){i.settings.RENDER_OPTIONS.hello=!1}},exports.RenderManager=P([M()],exports.RenderManager),exports.DisplayDataManager=class{constructor(){this.eventEmitter=b(exports.EventEmitter),this.renderManager=b(exports.RenderManager),this._viewSize={width:1280,height:720},this._designSize={width:1280,height:720},this._gameScale=1,this._stateChanged=!1,this._orientation="landscape",this._deviceType="desktop",this._orientationState="desktop"}get params(){return{viewSize:this._viewSize,designSize:this._designSize,orientation:this._orientation,deviceType:this._deviceType,orientationState:this._orientationState,gameScale:this._gameScale,stateChanged:this._stateChanged}}update(e){var t,i,s,r;const n=this._orientationState;this._viewSize=null!==(t=e.viewSize)&&void 0!==t?t:this._viewSize,this._designSize=null!==(i=e.designSize)&&void 0!==i?i:this._designSize,this._orientation=null!==(s=e.orientation)&&void 0!==s?s:this._orientation,this._deviceType=null!==(r=e.deviceType)&&void 0!==r?r:this._deviceType,this._orientationState="desktop"===this._deviceType?"desktop":this._orientation,"tablet"===this._deviceType&&(this._orientationState="landscape"===this._orientation?"tabLandscape":"tabPortrait"),this._gameScale=this.calcScale(),this._stateChanged=n!==this._orientationState,this.renderManager.resize(this._viewSize.width,this._viewSize.height),this.eventEmitter.emit("displayDataUpdate",this.params)}calcScale(){const e="portrait"!==this._orientation,{width:t,height:i}=this._viewSize,{width:s,height:r}=this._designSize;return Math.min(t/(e?s:r),i/(e?r:s))}},exports.DisplayDataManager=P([M()],exports.DisplayDataManager);class Pe extends n.Howl{constructor(e,t,i="sfx",s=!1,r=1,n=!1){super(e),this.group=i,this.singleInstance=s,this.name=t,this.volume(r),this.maxVolume=r,this.loop(n),this.load()}fadeIn(e){return this.play(),gsap.killTweensOf(this),gsap.fromTo(this,{volume:0},{duration:e,volume:this.maxVolume,ease:"none"}).then()}fadeOut(e){return gsap.killTweensOf(this),gsap.to(this,{duration:e,volume:0,ease:"none",onComplete:()=>{this.stop(),this.volume(this.maxVolume)}}).then()}play(){return void 0!==this.id&&this.singleInstance?super.play(this.id):this.id=super.play(this.name),this.id}}exports.SoundManager=class{constructor(){this.groupMuted={ambient:!1,sfx:!1,all:!1},this.sounds=[]}muteSoundGroup(e,t){this.getSoundGroup(e).forEach((e=>e.mute(t))),this.groupMuted[e]=t}fadeIn(e,t){return this.getSound(e).fadeIn(t)}fadeOut(e,t){return this.getSound(e).fadeOut(t)}getSound(e){return this.sounds.find((t=>t.name===e))}getSoundGroup(e){return this.sounds.filter((t=>t.group===e))}globalMute(e=!1){this.groupMuted.all=e,n.Howler.mute(e)}globalVolume(e){if(void 0===e)return n.Howler.volume();n.Howler.volume(e)}pause(e){this.getSound(e).pause()}play(e){this.getSound(e).play()}stop(e){this.getSound(e).stop()}preloadSound(e){return new Promise(((t,i)=>{const s=new n.Howl({src:e});s.on("load",(()=>t(s))),s.on("loaderror",i)}))}registerSound(e,t){const i={src:e._src,preload:!1};t.start&&t.end?i.sprite=this.parseSpriteProps(t.name,t.start,t.end):i.sprite={[t.name]:[0,1e3*e.duration()]};const s=new Pe(i,t.name,t.group,t.singleInstance,t.volume,t.loop);return s.mute(this.groupMuted[t.group]),this.sounds.push(s),s}registerSprite(e,t){return t.forEach((t=>{this.registerSound(e,t)})),this.sounds}parseSpriteProps(e,t,i){const s={},r=this.toMilliseconds(t),n=this.toMilliseconds(i);return s[e]=[r,n-r],s}toMilliseconds(e){return Number(e.split(".")[1])+1e3*Number(e.split(".")[0].split(":")[1])+60*Number(e.split(".")[0].split(":")[0])*1e3}},exports.SoundManager=P([M()],exports.SoundManager),exports.QAAutomationManager=class{constructor(){this.renderManager=b(exports.RenderManager),S.COMMANDS&&this.setAutomationCommands()}getChildById(e){const t=this.createArrayWithAutomationIdObjects(this.renderManager.rootContainer).filter((t=>t.automationId===e));if(t.length>1)throw Error("Two or more containers with identical automationId!");return t[0]}getListOfAllAutomationIds(){return this.createArrayWithAutomationIdObjects(this.renderManager.rootContainer)}createArrayWithAutomationIdObjects(e){const t=[];return e.children.forEach((e=>{t.push(...this.createArrayWithAutomationIdObjects(e))})),e.automationId&&t.push(this.createObjectForAutomation(e)),t}createObjectForAutomation(e){const t=e.toGlobal(new i.Point(0,0));return{visibility:e.visible,globalPosition:t,automationId:e.automationId,click:()=>this.simulateClick(t)}}setAutomationCommands(){window.automationCommands=Object.assign(Object.assign({},window.automationCommands),{getCanvasElementByAutomationId:e=>this.getChildById(e),getRootContainer:()=>this.renderManager.rootContainer,getListOfAllAutomationIds:()=>this.getListOfAllAutomationIds(),setGameSpeed:e=>this.setGameSpeed(e)})}setGameSpeed(e){this.renderManager.gameSpeed(e)}simulateClick(e){const t={bubbles:!0,cancelable:!0,clientX:e.x,clientY:e.y},i=!!window.PointerEvent,s="ontouchstart"in window,r=i?"pointerdown":s?"touchend":"mousedown",n=new MouseEvent(i?"pointerup":s?"touchstart":"mouseup",t),o=new MouseEvent(r,t);this.renderManager.renderer.view.dispatchEvent(o),this.renderManager.renderer.view.dispatchEvent(n)}},exports.QAAutomationManager=P([M()],exports.QAAutomationManager),exports.ResourceManager=class{constructor(){this.resources={},this.Texture=i.Texture}getJson(e){return this.resources[e].data}getResource(e){return this.resources[e]}getSpineData(e){return this.resources[e].spineData}getTexture(e){return i.Texture.from(e)}setResources(e){this.resources=Object.assign(Object.assign({},this.resources),e)}addTextureToCache(e,t){i.Texture.addToCache(e,t)}},exports.ResourceManager=P([M()],exports.ResourceManager),exports.LoaderManager=class{constructor(){this.loader=i.Assets.loader,this.eventEmitter=b(exports.EventEmitter),this.resourceManager=b(exports.ResourceManager),this.resourceOptions=new Map,this.addDefaultResourceOptions()}addBaseUrl(e){i.Assets.resolver.basePath=e}addCacheID(e){i.Assets.resolver.setDefaultSearchParams(`cacheID=${e}`)}addResourceOption(e,t){this.resourceOptions.set(e,t)}getResourceOptions(){return this.resourceOptions}load(e){return this.emitLoadingEvent(0,e),i.Assets.loadBundle(e,(t=>{this.emitLoadingEvent(t,e)})).then((e=>{this.resourceManager.setResources(e)}))}prepareResources(e){const t={};e.forEach((e=>{e.loadGroup||(e.loadGroup="initial"),t[e.loadGroup]=!0,e.name||(e.name=v(e.url))}));for(const s in t)i.Assets.addBundle(s,e.filter((e=>e.loadGroup===s)).map((e=>({name:e.name,srcs:this.replaceUrlParam(e.url),data:Object.assign({name:e.name},this.modifyResourceData(e.data))}))))}addDefaultResourceOptions(){const e=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp");this.resourceOptions.set("resolution",""),this.resourceOptions.set("language",""),this.resourceOptions.set("format",e?"webp":"png")}replaceUrlParam(e){return this.resourceOptions.forEach(((t,i)=>{const s=new RegExp(`{${i}}`,"g");e=e.replace(s,t)})),e}modifyResourceData(e){var t;return(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.spineAtlasFile)&&(e.spineAtlasFile=this.replaceUrlParam(e.metadata.spineAtlasFile)),e}emitLoadingEvent(e,t){this.eventEmitter.emit("gameLoading",{progress:e>99.99999999?100:e,group:t})}},exports.LoaderManager=P([M()],exports.LoaderManager),exports.TranslationManager=class{constructor(){this._texts={},this.formatText=(e,t={})=>(Object.keys(t).forEach((i=>{const s=new RegExp(`{${i}}`,"g");e=e.replace(s,t[i])})),e)}get texts(){return this._texts}addTexts(e){this._texts=Object.assign(Object.assign({},this._texts),e)}getTranslation(e,t){var i;let s=null!==(i=this._texts[e])&&void 0!==i?i:`{${e}}`;return t&&(s=this.formatText(s,t)),s}},exports.TranslationManager=P([M()],exports.TranslationManager),exports.VibrationManager=class{get isEnabled(){return this._isEnabled}set isEnabled(e){this._isEnabled=e}get isSupported(){return"vibrate"in window.navigator}vibrate(e=50,t){if(!1===this._isEnabled)return!1;const i=[e];if(t)for(let s=1;s<t;s++)i.push(e);return!(!this.isSupported||!this.isEnabled)&&window.navigator.vibrate(i)}},exports.VibrationManager=P([M()],exports.VibrationManager);const De=[exports.RootContainerComponent,exports.AXAnimatedSprite,exports.AXButton,exports.AXSpineButton,exports.AXContainer,exports.AXGraphics,exports.AXNineSlicePlane,exports.AXParticlesEmitter,exports.AXSpine,exports.AXSprite,exports.AXTilingSprite,exports.AXBitmapText,exports.AXHTMLText,exports.AXText];const Re={name:"loadTranslations",extension:{type:i.ExtensionType.LoadParser,priority:i.LoaderParserPriority.Normal},testParse(e,t){var i;return D(this,void 0,void 0,(function*(){return Promise.resolve("translations"===(null===(i=t.data)||void 0===i?void 0:i.resourceType))}))},parse(e,t){return D(this,void 0,void 0,(function*(){return b(exports.TranslationManager).addTexts(e),Promise.resolve()}))}},Xe={name:"loadSounds",extension:{type:i.ExtensionType.LoadParser,priority:i.LoaderParserPriority.Normal},test(e,t){var i;const s=null===(i=t.data)||void 0===i?void 0:i.resourceType;return"sound"===s||"soundSprite"===s},load(e,t){var i,s;return D(this,void 0,void 0,(function*(){let r=e;e.includes(",")&&(r=e.split(","));const n=b(exports.SoundManager),o=yield n.preloadSound(r);"soundSprite"===(null===(i=t.data)||void 0===i?void 0:i.resourceType)&&n.registerSprite(o,t.data.sprite),"sound"===(null===(s=t.data)||void 0===s?void 0:s.resourceType)&&n.registerSound(o,t.data.options)}))}};i.extensions.add(Re),i.extensions.add(Xe),window.PIXI=h,window.gsap=e.gsap,e.gsap.registerPlugin(t.PixiPlugin),t.PixiPlugin.registerPIXI(h),exports.PIXI=h,exports.projection=l,exports.AXApplication=class{constructor(e,t){this.renderManager=b(exports.RenderManager),A.forEach(((e,t)=>{_.has(t)||_.set(t,new e),S.WINDOW_DEBUG&&f(_.get(t),t.name,"s")})),this.registerComponents(De),this.setup(e,t).then((()=>{this.init()}))}setup(e,t){return this.renderManager.createRenderer(t),e.appendChild(this.renderManager.canvasElement),window.__PIXI_APP__={stage:this.renderManager.rootContainer,renderer:this.renderManager.renderer,view:this.renderManager.renderer.view},Promise.resolve()}registerComponents(e){var t;t=e,F.push(...t)}registerActions(e){(e=>{G.push(...e)})(e)}registerLayoutTemplates(e){Object.entries(e).forEach((([e,t])=>{O(e,t)}))}},exports.BaseText=ie,exports.EventEmitterProvider=R,exports.FullSize=Ee,exports.GameAction=class extends R{constructor(){super(),this.promise=new Promise(((e,t)=>{this.resolvePromise=e,this.rejectPromise=t}))}run(e){}destroy(){super.destroy(),this.promise=null,this.resolve=null,this.reject=null}resolve(e){this.destroy(),this.resolvePromise(e)}reject(e){this.destroy(),this.rejectPromise(e)}},exports.GameComponent=I,exports.Injectable=M,exports.InjectableAction=e=>t=>{if(e){if(!z.has(e))throw new Error(`Action ${e.name} is not added to injections for replace!`);z.set(e,t)}else{if(z.has(t))throw new Error(`Action ${t.name} already added to injections!`);z.set(t,t)}},exports.Mediator=X,exports.OrientationState=Ce,exports.Sound=Pe,exports.StickToEdge=Oe,exports.ViewExtension=W,exports.applyAnimatedSpriteLayout=le,exports.applyBitmapTextLayout=re,exports.applyButtonLayout=me,exports.applyContainerLayout=te,exports.applyGraphicsLayout=ge,exports.applyHTMLTextLayout=oe,exports.applyNineSlicePlaneLayout=Se,exports.applyParticlesEmitterLayout=fe,exports.applySpineButtonLayout=be,exports.applySpineLayout=Ae,exports.applySpriteLayout=ce,exports.applyTextLayout=pe,exports.applyTilingSpriteLayout=Te,exports.bindActionToEvent=(e,t=!1)=>i=>{if(t)b(exports.EventEmitter).promiseOn(e,(e=>$(i,e)));else{let t=N.get(e);t||(t=new q,N.set(e,t),b(exports.EventEmitter).on(e,t.run.bind(t))),t.add(i)||console.warn(`Action ${i} for event ${String(e)} is already bound!`)}},exports.createComponent=k,exports.createComponentFromId=U,exports.inject=b,exports.loadSounds=Xe,exports.loadTranslations=Re,exports.runAction=$,exports.settings=S,exports.utils=V,exports.viewExtensions=H,exports.viewUtils=ee;
