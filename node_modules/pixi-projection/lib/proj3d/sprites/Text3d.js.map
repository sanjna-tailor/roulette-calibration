{"version":3,"file":"Text3d.js","sources":["../../../src/proj3d/sprites/Text3d.ts"],"sourcesContent":["import { Text, TextStyle } from '@pixi/text';\r\nimport { Projection3d } from '../Projection3d';\r\nimport { IPointData, Matrix } from '@pixi/math';\r\nimport { container3dGetDepth, container3dIsFrontFace, container3dToLocal } from '../Container3d';\r\nimport { DisplayObject } from '@pixi/display';\r\nimport { TRANSFORM_STEP } from '../../base';\r\nimport { Sprite3d } from './Sprite3d';\r\nimport { Euler } from '../Euler';\r\n\r\nexport class Text3d extends Text\r\n{\r\n    constructor(text?: string, style?: TextStyle, canvas?: HTMLCanvasElement)\r\n    {\r\n        super(text, style, canvas);\r\n        this.proj = new Projection3d(this.transform);\r\n        this.pluginName = 'batch2d';\r\n    }\r\n\r\n    proj: Projection3d;\r\n    vertexData2d: Float32Array = null;\r\n\r\n    get worldTransform(): Matrix\r\n    {\r\n        return this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\r\n    }\r\n\r\n    toLocal<T extends IPointData>(position: IPointData, from?: DisplayObject,\r\n        point?: T, skipUpdate?: boolean,\r\n        step = TRANSFORM_STEP.ALL): T\r\n    {\r\n        return container3dToLocal.call(this, position, from, point, skipUpdate, step);\r\n    }\r\n\r\n    isFrontFace(forceUpdate?: boolean): boolean\r\n    {\r\n        return container3dIsFrontFace.call(this, forceUpdate);\r\n    }\r\n\r\n    getDepth(forceUpdate?: boolean): boolean\r\n    {\r\n        return container3dGetDepth.call(this, forceUpdate);\r\n    }\r\n\r\n    get position3d(): IPointData\r\n    {\r\n        return this.proj.position;\r\n    }\r\n    set position3d(value: IPointData)\r\n    {\r\n        this.proj.position.copyFrom(value);\r\n    }\r\n    get scale3d(): IPointData\r\n    {\r\n        return this.proj.scale;\r\n    }\r\n    set scale3d(value: IPointData)\r\n    {\r\n        this.proj.scale.copyFrom(value);\r\n    }\r\n    get euler(): Euler\r\n    {\r\n        return this.proj.euler;\r\n    }\r\n    set euler(value: Euler)\r\n    {\r\n        this.proj.euler.copyFrom(value);\r\n    }\r\n    get pivot3d(): IPointData\r\n    {\r\n        return this.proj.pivot;\r\n    }\r\n    set pivot3d(value: IPointData)\r\n    {\r\n        this.proj.pivot.copyFrom(value);\r\n    }\r\n}\r\n\r\nText3d.prototype.calculateVertices = Sprite3d.prototype.calculateVertices;\r\n(Text3d.prototype as any).calculateTrimmedVertices = Sprite3d.prototype.calculateTrimmedVertices;\r\n(Text3d.prototype as any)._calculateBounds = Sprite3d.prototype._calculateBounds;\r\nText3d.prototype.containsPoint = Sprite3d.prototype.containsPoint;\r\n(Text3d.prototype as any)._render = Sprite3d.prototype._render;\r\n"],"names":["Text","Projection3d","TRANSFORM_STEP","container3dToLocal","container3dIsFrontFace","container3dGetDepth","Sprite3d"],"mappings":";;;;;;;;;AASO,MAAM,eAAeA,SAC5B,CAAA;AAAA,EACI,WAAA,CAAY,IAAe,EAAA,KAAA,EAAmB,MAC9C,EAAA;AACI,IAAM,KAAA,CAAA,IAAA,EAAM,OAAO,MAAM,CAAA,CAAA;AAM7B,IAA6B,IAAA,CAAA,YAAA,GAAA,IAAA,CAAA;AALzB,IAAA,IAAA,CAAK,IAAO,GAAA,IAAIC,yBAAa,CAAA,IAAA,CAAK,SAAS,CAAA,CAAA;AAC3C,IAAA,IAAA,CAAK,UAAa,GAAA,SAAA,CAAA;AAAA,GACtB;AAAA,EAKA,IAAI,cACJ,GAAA;AACI,IAAA,OAAO,KAAK,IAAK,CAAA,MAAA,GAAS,KAAK,SAAU,CAAA,cAAA,GAAiB,KAAK,IAAK,CAAA,KAAA,CAAA;AAAA,GACxE;AAAA,EAEA,QAA8B,QAAsB,EAAA,IAAA,EAChD,OAAW,UACX,EAAA,IAAA,GAAOC,kCAAe,GAC1B,EAAA;AACI,IAAA,OAAOC,+BAAmB,IAAK,CAAA,IAAA,EAAM,UAAU,IAAM,EAAA,KAAA,EAAO,YAAY,IAAI,CAAA,CAAA;AAAA,GAChF;AAAA,EAEA,YAAY,WACZ,EAAA;AACI,IAAO,OAAAC,kCAAA,CAAuB,IAAK,CAAA,IAAA,EAAM,WAAW,CAAA,CAAA;AAAA,GACxD;AAAA,EAEA,SAAS,WACT,EAAA;AACI,IAAO,OAAAC,+BAAA,CAAoB,IAAK,CAAA,IAAA,EAAM,WAAW,CAAA,CAAA;AAAA,GACrD;AAAA,EAEA,IAAI,UACJ,GAAA;AACI,IAAA,OAAO,KAAK,IAAK,CAAA,QAAA,CAAA;AAAA,GACrB;AAAA,EACA,IAAI,WAAW,KACf,EAAA;AACI,IAAK,IAAA,CAAA,IAAA,CAAK,QAAS,CAAA,QAAA,CAAS,KAAK,CAAA,CAAA;AAAA,GACrC;AAAA,EACA,IAAI,OACJ,GAAA;AACI,IAAA,OAAO,KAAK,IAAK,CAAA,KAAA,CAAA;AAAA,GACrB;AAAA,EACA,IAAI,QAAQ,KACZ,EAAA;AACI,IAAK,IAAA,CAAA,IAAA,CAAK,KAAM,CAAA,QAAA,CAAS,KAAK,CAAA,CAAA;AAAA,GAClC;AAAA,EACA,IAAI,KACJ,GAAA;AACI,IAAA,OAAO,KAAK,IAAK,CAAA,KAAA,CAAA;AAAA,GACrB;AAAA,EACA,IAAI,MAAM,KACV,EAAA;AACI,IAAK,IAAA,CAAA,IAAA,CAAK,KAAM,CAAA,QAAA,CAAS,KAAK,CAAA,CAAA;AAAA,GAClC;AAAA,EACA,IAAI,OACJ,GAAA;AACI,IAAA,OAAO,KAAK,IAAK,CAAA,KAAA,CAAA;AAAA,GACrB;AAAA,EACA,IAAI,QAAQ,KACZ,EAAA;AACI,IAAK,IAAA,CAAA,IAAA,CAAK,KAAM,CAAA,QAAA,CAAS,KAAK,CAAA,CAAA;AAAA,GAClC;AACJ,CAAA;AAEA,MAAO,CAAA,SAAA,CAAU,iBAAoB,GAAAC,iBAAA,CAAS,SAAU,CAAA,iBAAA,CAAA;AACvD,MAAO,CAAA,SAAA,CAAkB,wBAA2B,GAAAA,iBAAA,CAAS,SAAU,CAAA,wBAAA,CAAA;AACvE,MAAO,CAAA,SAAA,CAAkB,gBAAmB,GAAAA,iBAAA,CAAS,SAAU,CAAA,gBAAA,CAAA;AAChE,MAAO,CAAA,SAAA,CAAU,aAAgB,GAAAA,iBAAA,CAAS,SAAU,CAAA,aAAA,CAAA;AACnD,MAAO,CAAA,SAAA,CAAkB,OAAU,GAAAA,iBAAA,CAAS,SAAU,CAAA,OAAA;;;;"}